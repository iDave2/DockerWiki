name: wiki
#
#  This file can be manually generated by running 'docker compose config'
#  and removing the build instructions. It seems we need a variable-free
#  Compose file for a Bitnami-style download-and-go feature. See their
#  Hub site for more info.
#
services:
  data:
    environment:
      TZ: UTC
    hostname: data
    image: idave2/mariadb:0.2
    networks:
      net: null
    volumes:
    - type: volume
      source: data
      target: /var/lib/mysql
      volume: {}
  view:
    depends_on:
      data:
        condition: service_started
        required: true
    environment:
      TZ: UTC
    hostname: view
    image: idave2/mediawiki:0.2
    networks:
      net: null
    ports:
    - mode: ingress
      host_ip: 127.0.0.1
      target: 80
      published: "8080"
      protocol: tcp
networks:
  net:
    name: wiki_net
volumes:
  data:
    name: wiki_data
